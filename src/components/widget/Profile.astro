---
import { Icon } from "astro-icon/components";
import { profileConfig } from "../../config";
import { url } from "../../utils/url-utils";
import ImageWrapper from "../misc/ImageWrapper.astro";

const config = profileConfig;
---
<div class="card-base p-3">
    <a aria-label="Go to About Page" href={url('/about/')}
       class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95">
        <div class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center">
            <Icon name="fa6-regular:address-card"
                  class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl">
            </Icon>
        </div>
        <ImageWrapper src={config.avatar || ""} alt="Profile Image of the Author" class="mx-auto lg:w-full h-full lg:mt-0 "></ImageWrapper>
    </a>
    <div class="px-2">
        <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition flex items-center justify-center gap-1">
            {config.name}
            <span class="meta-verified-badge" title="Cuenta verificada" aria-label="Cuenta verificada" role="img">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" fill="#0095F6" class="meta-verified-icon">
                    <path d="M20.396 11c0-.796-.356-1.278-.644-1.674-.258-.353-.48-.658-.48-1.036 0-.46.266-.9.506-1.296.283-.465.543-.893.543-1.39 0-.534-.295-.934-.567-1.304-.254-.346-.49-.668-.49-1.054 0-.422.234-.83.445-1.2.247-.434.474-.833.474-1.317 0-.547-.292-.933-.57-1.293-.262-.34-.508-.66-.508-1.076 0-.39.206-.76.39-1.092.22-.396.423-.763.423-1.24 0-.655-.383-1.06-.737-1.435C18.797.247 18.464 0 18.085 0c-.12 0-.246.024-.373.073-.65.249-1.02.188-1.458.113C15.808.1 15.326 0 14.687 0c-.636 0-1.107.096-1.545.183-.44.087-.822.163-1.356.163-.533 0-.916-.076-1.356-.163C9.992.096 9.52 0 8.885 0c-.64 0-1.122.1-1.567.186-.438.085-.808.157-1.458-.113A1.06 1.06 0 005.487 0c-.38 0-.712.247-1.068.614C4.065.99 3.682 1.395 3.682 2.05c0 .477.203.844.423 1.24.184.332.39.702.39 1.092 0 .416-.246.735-.507 1.076-.28.36-.57.746-.57 1.293 0 .484.226.883.473 1.317.211.37.446.778.446 1.2 0 .386-.237.708-.49 1.054-.273.37-.568.77-.568 1.304 0 .497.26.925.543 1.39.24.396.506.836.506 1.296 0 .378-.222.683-.48 1.036-.288.396-.644.878-.644 1.674 0 .796.356 1.278.644 1.674.258.353.48.658.48 1.036 0 .46-.266.9-.506 1.296-.283.465-.543.893-.543 1.39 0 .534.295.934.568 1.304.253.346.49.668.49 1.054 0 .422-.235.83-.446 1.2-.247.434-.474.833-.474 1.317 0 .547.29.933.57 1.293.262.34.508.66.508 1.076 0 .39-.206.76-.39 1.092-.22.396-.423.763-.423 1.24 0 .655.383 1.06.737 1.435.356.367.688.614 1.068.614.12 0 .245-.024.373-.073.65-.249 1.02-.188 1.458-.113.445.087.927.186 1.567.186.636 0 1.107-.096 1.545-.183.44-.087.823-.163 1.356-.163.534 0 .917.076 1.356.163.438.087.91.183 1.545.183.64 0 1.122-.1 1.567-.186.438-.085.807-.136 1.458.113.127.049.253.073.373.073.38 0 .712-.247 1.068-.614.354-.375.737-.78.737-1.435 0-.477-.203-.844-.423-1.24-.184-.332-.39-.702-.39-1.092 0-.416.246-.735.508-1.076.278-.36.567-.746.567-1.293 0-.484-.26-.925-.543-1.39-.24-.396-.506-.836-.506-1.296 0-.378.222-.683.48-1.036.288-.396.644-.878.644-1.674z"/>
                    <path d="M9.64 15.352l-3.428-3.428 1.372-1.372 2.056 2.056 5.065-5.065 1.372 1.372L9.64 15.352z" fill="white"/>
                </svg>
            </span>
        </div>
        <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div>
        <div class="text-center text-neutral-400 mb-2.5 transition">{config.bio}</div>
        <div class="flex gap-2 justify-center mb-1">
            {config.links.length > 1 && config.links.map(item =>
                    <a rel="me" aria-label={item.name} href={item.url} target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90">
                        <Icon name={item.icon} class="text-[1.5rem]"></Icon>
                    </a>
            )}
            {config.links.length == 1 && <a rel="me" aria-label={config.links[0].name} href={config.links[0].url} target="_blank"
                                            class="btn-regular rounded-lg h-10 gap-2 px-3 font-bold active:scale-95">
                <Icon name={config.links[0].icon} class="text-[1.5rem]"></Icon>
                {config.links[0].name}
            </a>}
        </div>
    </div>
</div>

<style>
    .meta-verified-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        cursor: default;
    }

    .meta-verified-icon {
        width: 0.95rem;
        height: 0.95rem;
        transition: all 0.2s ease;
    }

    .meta-verified-badge:hover .meta-verified-icon {
        transform: scale(1.08);
        filter: drop-shadow(0 0 4px rgba(0, 149, 246, 0.4));
    }

    :global(.dark) .meta-verified-icon {
        filter: drop-shadow(0 0 3px rgba(0, 149, 246, 0.25));
    }

    :global(.dark) .meta-verified-badge:hover .meta-verified-icon {
        filter: drop-shadow(0 0 6px rgba(0, 149, 246, 0.5));
    }
</style>

